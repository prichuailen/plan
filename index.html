
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Interactiva - Ingeniería Química</title>
  <style>
    body {
      background-color: white; 
      font-family: sans-serif;
      padding: 20px;
    }
    .nivel {
      margin-bottom: 30px;
    }
    h2 {
      margin-bottom: 10px;
    }
    .materia {
       display: inline-block;
      margin: 5px;
      padding: 10px 15px;
      border-radius: 5px;
      background-color: #ccc;
      color: #000;
      cursor: pointer;
      user-select: none;
      position: relative;
      overflow: hidden;
    }
    .firmada {
      background-color: violet;
    }
    .aprobada::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      border-top: 3px solid black;
      transform: rotate(-45deg);
      pointer-event: none; 
    }
    .final-aprobado::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      height: 2px;
      right: 0;
      border-top: 2px solid black ;
      transform: rotate(45deg);
      transform-origin: center ; 
      pointer-event: none;
    }
    .bloqueada {
      background-color: #888;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva - Ingeniería Química</h1>
  <div id="contenedor-materias"></div>
  <script>
    const materias = {
  "Primer nivel": [
    { id: "IIQ", nombre: "Introducción a la Ingeniería Química", requisitos: [] },
    { id: "SSRR", nombre: "Sistemas de Representación", requisitos: [] },
    { id: "Ingles1", nombre: "Inglés 1", requisitos: [] },
    { id: "AGA", nombre: "Álgebra y Geometría Analítica", requisitos: [] },
    { id: "AM1", nombre: "Análisis Matemático 1", requisitos: [] },
    { id: "IngSoc", nombre: "Ingeniería y Sociedad", requisitos: [] },
    { id: "AM2", nombre: "Análisis Matemático 2", requisitos: [] },
    { id: "Q", nombre: "Química", requisitos: [] },
    { id: "FI", nombre: "Fundamentos de Informática", requisitos: [] }
  ],

  "Segundo nivel": [
    { id: "IEP", nombre: "Introducción a Equipos y Procesos", requisitos: [{ id: "IIQ", estado: 1 }, { id: "Q", estado: 1 }] },
    { id: "QO", nombre: "Química Orgánica", requisitos: [{ id: "Q", estado: 1 }] },
    { id: "QI", nombre: "Química Inorgánica", requisitos: [{ id: "Q", estado: 1 }] },
    { id: "F1", nombre: "Física 1", requisitos: [] },
    { id: "Ingles2", nombre: "Inglés 2", requisitos: [{ id: "Ingles1", estado: 1 }] },
    { id: "F2", nombre: "Física 2", requisitos: [{ id: "F1", estado: 1 }] },
    { id: "PyE", nombre: "Probabilidad y Estadística", requisitos: [{ id: "AM1", estado: 1 }, { id: "AGA", estado: 1 }] },
    { id: "MSA", nombre: "Matemática Superior Aplicada", requisitos: [{ id: "AM2", estado: 1 }, { id: "AM1", estado: 2 }, { id: "AGA", estado: 2 }] }
  ],

  "Tercer nivel": [
    { id: "BME", nombre: "Balances de Masa y Energía", requisitos: [
      { id: "Q", estado: 1 }, { id: "SSRR", estado: 1 }, { id: "FI", estado: 1 }, { id: "IEP", estado: 1 },
      { id: "F2", estado: 1 }, { id: "IIQ", estado: 2 }, { id: "AGA", estado: 2 }, { id: "AM1", estado: 2 }
    ]},
    { id: "QAp", nombre: "Química Aplicada", requisitos: [
      { id: "IEP", estado: 1 }, { id: "QI", estado: 1 }, { id: "F2", estado: 1 }, { id: "QO", estado: 1 },
      { id: "IIQ", estado: 2 }, { id: "IngSoc", estado: 2 }, { id: "Q", estado: 2 }, { id: "Ingles1", estado: 2 }
    ]},
    { id: "termo", nombre: "Termodinámica", requisitos: [
      { id: "QI", estado: 1 }, { id: "AM2", estado: 1 }, { id: "F2", estado: 1 }, { id: "AM1", estado: 2 }, { id: "Q", estado: 2 }
    ]},
    { id: "CM", nombre: "Ciencia de los Materiales", requisitos: [
      { id: "IEP", estado: 1 }, { id: "QI", estado: 1 }, { id: "QO", estado: 1 }, { id: "IIQ", estado: 2 }, { id: "Q", estado: 2 }
    ]},
    { id: "QA", nombre: "Química Analítica", requisitos: [
      { id: "PyE", estado: 1 }, { id: "QI", estado: 1 }, { id: "QO", estado: 1 }, { id: "IngSoc", estado: 2 }, { id: "Q", estado: 2 }
    ]},
    { id: "MQB", nombre: "Microbiología y Química Biológica", requisitos: [
      { id: "QI", estado: 1 }, { id: "QO", estado: 1 }, { id: "Q", estado: 2 }
    ]},
    { id: "FT", nombre: "Fenómenos de Transporte", requisitos: [
      { id: "IEP", estado: 1 }, { id: "AM2", estado: 1 }, { id: "F2", estado: 1 },
      { id: "AM1", estado: 2 }, { id: "AGA", estado: 2 }, { id: "Q", estado: 2 }
    ]},
    { id: "FQ", nombre: "Físico Química", requisitos: [
      { id: "IEP", estado: 1 }, { id: "AM2", estado: 1 }, { id: "F2", estado: 1 },
      { id: "AM1", estado: 2 }, { id: "AGA", estado: 2 }, { id: "Q", estado: 2 }
    ]},
    { id: "leg", nombre: "Legislación", requisitos: [
      { id: "IngSoc", estado: 1 }, { id: "IIQ", estado: 1 }
    ]},
    { id: "eco", nombre: "Economía", requisitos: [
      { id: "IEP", estado: 1 }, { id: "IngSoc", estado: 2 }, { id: "AGA", estado: 2 }
    ]}
  ],

  "Cuarto nivel": [
    { id: "DSOSP", nombre: "Diseño, Simulación, Optimización y Seguridad de Procesos", requisitos: [
      { id: "BME", estado: 1 }, { id: "MSA", estado: 1 }, { id: "SSRR", estado: 2 },
      { id: "FI", estado: 2 }, { id: "IEP", estado: 2 }, { id: "AM2", estado: 2 }, { id: "Ingles2", estado: 2 }
    ]},
    { id: "OU1", nombre: "Operaciones Unitarias 1", requisitos: [
      { id: "BME", estado: 1 }, { id: "termo", estado: 1 }, { id: "FT", estado: 1 },
      { id: "IEP", estado: 2 }, { id: "AM2", estado: 2 }, { id: "F2", estado: 2 }
    ]},
    { id: "TET", nombre: "Tecnología de la Energía Térmica", requisitos: [
      { id: "BME", estado: 1 }, { id: "FQ", estado: 1 }, { id: "termo", estado: 1 }, { id: "FT", estado: 1 },
      { id: "IEP", estado: 2 }, { id: "AM2", estado: 2 }, { id: "F2", estado: 2 }
    ]},
    { id: "MI", nombre: "Mecánica Industrial", requisitos: [
      { id: "IEP", estado: 1 }, { id: "FQ", estado: 1 },
      { id: "F1", estado: 2 }, { id: "QI", estado: 2 }, { id: "CM", estado: 2 }
    ]},
    { id: "OI", nombre: "Organización Industrial", requisitos: [
      { id: "PyE", estado: 1 },
      { id: "IEP", estado: 2 }, { id: "IngSoc", estado: 2 }, { id: "leg", estado: 2 }
    ]},
    { id: "OU2", nombre: "Operaciones Unitarias 2", requisitos: [
      { id: "FQ", estado: 1 }, { id: "termo", estado: 1 }, { id: "FT", estado: 1 },
      { id: "IEP", estado: 2 }, { id: "AM2", estado: 2 }, { id: "F2", estado: 2 }, { id: "QO", estado: 2 }
    ]},
    { id: "IRQ", nombre: "Ingeniería de las Reacciones Químicas", requisitos: [
      { id: "BME", estado: 1 }, { id: "FQ", estado: 1 }, { id: "termo", estado: 1 }, { id: "FT", estado: 1 },
      { id: "QI", estado: 2 }, { id: "AM2", estado: 2 }, { id: "QO", estado: 2 }
    ]}
  ],

  "Quinto nivel": [
    { id: "proyecto", nombre: "Proyecto Final", requisitos: [
      { id: "DSOSP", estado: 1 }, { id: "OU1", estado: 1 }, { id: "TET", estado: 1 },
      { id: "OU2", estado: 1 }, { id: "IRQ", estado: 1 }, { id: "QI", estado: 1 },
      { id: "BME", estado: 2 }, { id: "FQ", estado: 2 }, { id: "FT", estado: 2 },
      { id: "QAp", estado: 2 }, { id: "eco", estado: 2 }
    ]},
    { id: "CAP", nombre: "Control Automático de Procesos", requisitos: [
      { id: "DSOSP", estado: 1 }, { id: "OU2", estado: 1 },
      { id: "BME", estado: 2 }, { id: "MSA", estado: 2 }, { id: "QA", estado: 2 }
    ]},
    { id: "PPBB", nombre: "Procesos Biotecnológicos", requisitos: [
      { id: "BME", estado: 1 }, { id: "FQ", estado: 1 }, { id: "FT", estado: 1 }, { id: "MQB", estado: 1 },
      { id: "IEP", estado: 2 }, { id: "QI", estado: 2 }, { id: "QO", estado: 2 }
    ]},
    { id: "MIE", nombre: "Máquinas e Instalaciones Eléctricas", requisitos: [
      { id: "OU1", estado: 1 }, { id: "IEP", estado: 2 }, { id: "F2", estado: 2 }
    ]},
    { id: "HyST", nombre: "Higiene y Seguridad en el Trabajo", requisitos: [
      { id: "BME", estado: 1 }, { id: "QI", estado: 1 }, { id: "QO", estado: 1 }, { id: "IEP", estado: 2 }
    ]},
    { id: "IA", nombre: "Ingeniería Ambiental", requisitos: [
      { id: "QAp", estado: 1 }, { id: "OU1", estado: 1 }, { id: "OU2", estado: 1 }, { id: "IRQ", estado: 1 },
      { id: "leg", estado: 2 }, { id: "BME", estado: 2 }, { id: "QA", estado: 2 }
    ]},
    { id: "CCEP", nombre: "Calidad y Control Estadístico de Procesos", requisitos: [
      { id: "PyE", estado: 1 }, { id: "AM1", estado: 2 }
    ]},
    { id: "PPS", nombre: "Práctica Profesional Supervisada", requisitos: [
      { id: "DSOSP", estado: 1 }, { id: "OU1", estado: 1 }, { id: "TET", estado: 1 },
      { id: "OU2", estado: 1 }, { id: "IRQ", estado: 1 }, { id: "OI", estado: 1 },
      { id: "BME", estado: 2 }, { id: "FQ", estado: 2 }, { id: "FT", estado: 2 },
      { id: "QAp", estado: 2 }, { id: "eco", estado: 2 }
    ]}
  ]
};


    const estadoMaterias = JSON.parse(localStorage.getItem("estadoMaterias") || "{}");

    function guardarEstado() {
      localStorage.setItem("estadoMaterias", JSON.stringify(estadoMaterias));
    }

    function puedeDesbloquear(materia) {
      return materia.requisitos.every(id => estadoMaterias[id] >= 2);
    }

    function crearMalla() {
      const contenedor = document.getElementById("contenedor-materias");
      contenedor.innerHTML = "";

      for (const nivel in materias) {
        const divNivel = document.createElement("div");
        divNivel.className = "nivel";
        const titulo = document.createElement("h2");
        titulo.textContent = nivel;
        divNivel.appendChild(titulo);

        materias[nivel].forEach(materia => {
          const div = document.createElement("div");
          div.className = "materia";
          div.textContent = materia.nombre;

          const estado = estadoMaterias[materia.id] || 0;

          if (!puedeDesbloquear(materia) && estado === 0) {
            div.classList.add("bloqueada");
          } else {
            if (estado >= 1) div.classList.add("firmada");
            if (estado === 1) div.classList.add("aprobada");
            if (estado === 2) {
              div.classList.add("aprobada");
              div.classList.add("final-aprobado");
            }

            div.addEventListener("click", () => {
              estadoMaterias[materia.id] = (estadoMaterias[materia.id] || 0) + 1;
              if (estadoMaterias[materia.id] > 2) estadoMaterias[materia.id] = 0;
              guardarEstado();
              crearMalla();
            });
          }

          divNivel.appendChild(div);
        });

        contenedor.appendChild(divNivel);
      }
    }

    crearMalla();
  </script>
</body>
</html>
